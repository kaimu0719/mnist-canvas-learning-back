require "test_helper"

class Api::V1::SamplesControllerTest < ActionDispatch::IntegrationTest
  test "POST #create saves 28x28 PNG and returns id/path" do
    image_base64 = "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"
    data_url = "data:image/png;base64,#{image_base64}"

    # POST実行前後でSample件数が+1になること
    assert_difference("Sample.count", 1) do
      post api_v1_samples_path, params: { image: data_url, label: 3 }, as: :json
    end

    assert_response :success
  end
end